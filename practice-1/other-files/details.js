// Sample game data with detailed information
const gameDetails = {
    "cards": [
        {
            "id": 1,
            "image": "https://media.istockphoto.com/id/455302535/vector/snakes-and-ladders.jpg?s=612x612&w=0&k=20&c=bRlBIvz30kGjNqn21m2xL4zGnvkXeM4RlfcL79r-D48=",
            "video": "./video/how-to-play-snakes-and-ladders.mp4",
            "title": "Snakes and Ladders",
            "description": " A timeless board game of pure chance and excitement. Players race their tokens from the start to the finish, climbing up ladders for a quick boost but sliding down snakes for a frustrating setback. It's a game of ups and downs that teaches kids how to handle winning and losing gracefully.",
            "instructions": "1.Each player chooses a colored token and places it on the starting square (usually 1). 2.Players take turns rolling the die and move their token forward the number of squares shown. 3.If a player lands on a square with the bottom of a ladder, they climb up to the square at the top of the ladder. 4.If a player lands on a square with the head of a snake, they slide down to the square at the snake's tail. 5.The first player to reach the final square (usually 100) wins!",
            "timing": "15 - 30 minutes",
            "players": "2 - 4 players",
            "age": "5-12 years",
            "difficulty": "Easy",
            "rating": 4.5,
            "categories":"indoor kids",
            "link": "./indoor-kids.html",
            "buttonText": "View Details"
        },
        {
            "id": 2,
            "image": "https://media.istockphoto.com/id/506429829/photo/kids-run-around-playing-musical-chairs-game.jpg?s=612x612&w=0&k=20&c=b4am1lKzMlacs7n-T78sTREqGL0QHr4B_n0PixFlFPk=",
            "video": "./video/freeze-dance---musical-chairs-song-for-children-official-video-by-patty-shukla.mp4",
            "title": "Musical Chairs",
            "description": "A high-energy party classic that tests listening skills and reflexes. Players walk around a circle of chairs while music plays and must quickly find a seat when the music stops. The tension and laughter build as one chair is removed each round!",
            "instructions": "1.Arrange chairs in a circle, facing outwards. There should be one less chair than the number of players. 2.Start the music. Players walk steadily in a circle around the chairs. 3.Suddenly stop the music. Players must immediately find an empty chair to sit on. 4.The player left without a chair is eliminated from the round. 5.Remove one more chair, and start the music again. Repeat until only one player remains seated – the winner!",
            "timing": "10 - 15 minutes",
            "players": "4 - 10+ players",
            "age": "5-12 years",
            "difficulty": "Easy",
            "rating": 4.5,
            "categories":"indoor kids",
            "link": "./indoor-kids.html",
            "buttonText": "View Details"
        },
        {
            "id": 3,
            "image": "https://cdni.iconscout.com/illustration/premium/thumb/happy-family-playing-game-illustration-svg-download-png-4707559.png",
            "video": "./video/twister.mp4",
            "title": "Twister",
            "description": "A hilarious physical challenge that creates a human knot! Players place their hands and feet on colored circles on a mat as instructed by a spinner. The goal is to hold the positions without falling, often leading to tangled and funny situations.",
            "instructions": "1.Lay the Twister mat flat on the ground. 2.Designate one person as the 'Referee' who will spin the spinner and call out the moves. 3.The Referee spins and calls out the command (e.g., 'Right hand, red!'). 4.All players must move that body part to an empty circle of that color. 5.If a player falls or their knee or elbow touches the mat, they are out. 6.The last player left standing (without falling) wins the game.",
            "timing": "15 - 25 minutes",
            "players": "2 - 6 players",
            "age": "5-12 years",
            "difficulty": "Easy",
            "rating": 4.5,
            "categories":"indoor kids",
            "link": "./indoor-kids.html",
            "buttonText": "View Details"
        },
        {
            "id": 4,
            "image": "https://restoredpathwayscounseling.com/wp-content/uploads/2024/09/Simon-Says-for-Emotions.png",
            "video": "./video/simon-says.mp4",
            "title": "Simon Says",
            "description": "A brilliant game to test listening skills and focus. One player is 'Simon' who gives commands. The trick is to only follow the command if it starts with the phrase 'Simon says.' If you follow a command without 'Simon says,' you're out!",
            "instructions": "1.One player is chosen to be 'Simon.' The other players stand in front of them. 2.Simon gives commands to the players, either by saying 'Simon says [do this]' or just '[do this]'. 3.Players must only obey commands that begin with the words 'Simon says.' 4.If a player obeys a command that did not start with 'Simon says,' they are eliminated. 5.Simon can try to trick players by performing actions without saying 'Simon says.' 6.The last player remaining becomes the next Simon!",
            "timing": "10 - 20 minutes",
            "players": "3 - 10+ players",
            "age": "5-12 years",
            "difficulty": "Easy",
            "rating": 4.5,
            "categories":"indoor kids",
            "link": "./indoor-kids.html",
            "buttonText": "View Details"
        },
        {
            "id": 5,
            "image": "https://i0.wp.com/gameranx.com/wp-content/uploads/2025/06/image-39.png?fit=800%2C450&quality=80&ssl=1",
            "video": "./video/red-light,green-light.mp4",
            "title": "Red Light, Green Light",
            "description": "A classic game of sudden stops and quick bursts of speed that tests players' reflexes, listening skills, and ability to control their movements. One player acts as the 'Traffic Light' while the others are the 'Cars' trying to reach the finish line.",
            "instructions": "1.One player is chosen as the 'Traffic Light' and stands at the finish line with their back to the other players. 2.The other players line up at the starting point. 3.When the Traffic Light shouts 'Green Light!' and faces away, players can run towards the finish line. 4.When the Traffic Light shouts 'Red Light!' and quickly turns around, all players must freeze immediately. 5.Any player seen moving after 'Red Light' is called out and must return to the starting line. 6.The first player to reach and tag the Traffic Light wins and becomes the next Traffic Light.",
            "timing": "15 - 25 minutes",
            "players": "4 - 12 players",
            "age": "6-14 years",
            "difficulty": "Medium",
            "rating": 4.8,
            "categories":"outdoor kids",
            "link": "./outdoor-kids.html",
            "buttonText": "Explore Games"
        },
        {
            "id": 6,
            "image": "https://i.ytimg.com/vi/hM1HirxZ1g8/maxresdefault.jpg",
            "video": "./video/dog and the bone.mp4",
            "title": "Dog and the Bone",
            "description": "A thrilling team game that combines speed, strategy, and a bit of trickery. Two teams compete to be the quickest to grab the 'bone' from the center and return safely to their line without being tagged.",
            "instructions": "1.Divide players into two equal teams. Each team stands in a line, facing the other team, with a few meters of space between them. 2.Place a 'bone' (a soft toy, a handkerchief, or any safe object) in the center between the two teams. 3.Assign each player on both teams a number, starting from 1. (So, there is a Player 1 on Team A and a Player 1 on Team B). 4.The referee calls out a number. The two players with that number must run to the center. 5.The goal is to grab the bone and run back to their team's line without being tagged by the opposing player. 6.If the grabbing player is tagged, the other team gets a point. If they return safely, their team gets a point.",
            "timing": "20 - 30 minutes",
            "players": "6 - 16 players (even number)",
            "age": "6-14 years",
            "difficulty": "Medium",
            "rating": 4.8,
            "categories":"outdoor kids",
            "link": "./outdoor-kids.html",
            "buttonText": "Explore Games"
        },
        {
            "id": 7,
            "image": "https://www.shutterstock.com/image-vector/indonesia-traditional-special-games-during-260nw-674216356.jpg",
            "video": "./video/lemon.mp4",
            "title": "Lemon and Spoon Race",
            "description": "A classic race that prioritizes steady hands over pure speed. Players must balance a lemon (or similar object) on a spoon and race to the finish line without dropping it. It's a fantastic game for developing focus and coordination.",
            "instructions": "1.Give each player a spoon with a lemon placed on it. 2.Players line up at the starting line, holding the spoon's handle in one hand. 3.On 'Go!', all players race towards the finish line. 4.Players must balance the lemon on their spoon. They are not allowed to hold the lemon in place with their other hand. 5.If a player's lemon falls, they must stop, pick it up, place it back on the spoon, and continue from that spot. 6.The first player to cross the finish line with their lemon still on the spoon is the winner.",
            "timing": "15 - 25 minutes",
            "players": "4 - 10 players",
            "age": "6-14 years",
            "difficulty": "Medium",
            "rating": 4.8,
            "categories":"outdoor kids",
            "link": "./outdoor-kids.html",
            "buttonText": "Explore Games"
        },
        {
            "id": 8,
            "image": "https://static.vecteezy.com/system/resources/previews/047/833/299/non_2x/foosball-table-isolated-on-transparent-background-free-png.png",
            "video": "./video/foosball.mp4",
            "title": "Foosball",
            "description": "A competitive table game where players control rows of miniature footballers mounted on rods to kick a ball into the opponent's goal.",
            "instructions": "1.Spin the rods to move figures and hit the ball. 2.Score by getting the ball into the opponent's goal. 3.No spinning the rods 360 degrees. 4.",
            "timing": "10-20 minutes",
            "players": "2 or 4 players",
            "age": "12+ years",
            "difficulty": "Easy-Medium",
            "rating": 4.7,
            "categories":"indoor male",
            "link": "./indoor-male.html",
            "buttonText": "Learn More"
        },
        {
            "id": 9,
            "image": "https://png.pngtree.com/png-clipart/20241119/original/pngtree-gold-color-chess-pieces-png-image_17239433.png",
            "video": "./video/how-to-play-chess.mp4",
            "title": "Chess Board",
            "description": " A two-player strategy board game where the goal is to checkmate the opponent's king.",
            "instructions": "1.Each piece moves in a specific way (e.g., pawns forward, knights in L-shapes). 2.Protect your king while attacking the opponent's. 3.Checkmate ends the game.",
            "timing": "20-60 minutes",
            "players": "2 players",
            "age": "15+ years",
            "difficulty": "Hard",
            "rating": 4.7,
            "categories":"indoor male",
            "link": "./indoor-male.html",
            "buttonText": "Learn More"
        },
        {
            "id": 10,
            "image": "https://pngimg.com/d/darts_PNG27.png",
            "video": "./video/darts.mp4",
            "title": "Darts",
            "description": "Players throw small missiles (darts) at a circular target (dartboard) to score points.",
            "instructions": "1.Throw darts from a set distance. 2.Aim for high-scoring sections (e.g., bullseye). 3.Subtract scores from a starting total (e.g., 501).",
            "timing": "15-30 minutes",
            "players": "2-4 players",
            "age": "12+ years",
            "difficulty": "Medium",
            "rating": 4.7,
            "categories":"indoor male",
            "link": "./indoor-male.html",
            "buttonText": "Learn More"
        },
        {
            "id": 11,
            "image": "https://img.freepik.com/free-vector/hand-drawn-ipl-cricket-illustration_23-2149213601.jpg",
            "video": "./video/cricket.mp4",
            "title": " Cricket",
            "description": "A bat-and-ball game where two teams compete to score the most runs.",
            "instructions": "1.One team bats while the other bowls and fields. 2.The batsman tries to hit the ball and score runs by running between wickets. 3.The bowling team aims to dismiss batsmen by hitting wickets or catching the ball. 4.The team with the highest runs wins.",
            "timing": "1-3 hours (or shorter formats like 10-20 overs)",
            "players": " 11-22 players (2 teams of 11 each)",
            "age": "14+ years",
            "difficulty": "Medium-Hard",
            "rating": 4.6,
            "categories":"outdoor male",
            "link": "./oudoor-male.html",
            "buttonText": "Get Active"
        },
        {
            "id": 12,
            "image": "https://plus.unsplash.com/premium_photo-1685366454253-cb705836c5a8?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8b3V0ZG9vciUyMGdhbWVzfGVufDB8fDB8fHww",
            "video": "./video/rules-of-basketball--how-to-play-basketball--basketball-rules-for-beginners.mp4",
            "title": "Basketball",
            "description": "A dynamic sport where teams shoot a ball through a hoop to score points.",
            "instructions": "1.Dribble the ball and pass it to teammates. 2.Score by shooting the ball into the opponent's basket. 3.Defend your basket while preventing the other team from scoring.",
            "timing": "40-60 minutes (four quarters)",
            "players": "5-10 players (2 teams of 5 each)",
            "age": "12+ years",
            "difficulty": "Medium",
            "rating": 4.6,
            "categories":"outdoor male",
            "link": "./oudoor-male.html",
            "buttonText": "Get Active"
        },
        {
            "id": 13,
            "image": "https://www.outincanberra.com.au/wp-content/uploads/2018/05/Tug-of-war.jpg",
            "video": "./video/tug-of-war.mp4",
            "title": "Tug of War",
            "subtitle":"The Ultimate Test of Strength",
            "description": "A team-based strength contest where two groups pull on opposite ends of a rope.",
            "instructions": "1.Two teams pull the rope in opposite directions. 2.The team that pulls the center marker to their side wins. 3.Coordination and teamwork are key.",
            "timing": "10-20 minutes",
            "players": "8-16 players (2 teams of 4-8 each)",
            "age": "12+ years",
            "difficulty": "Easy (but physically demanding)",
            "rating": 4.6,
            "categories":"outdoor male",
            "link": "./oudoor-male.html",
            "buttonText": "Get Active"
        },
        {
            "id": 14,
            "image": "https://www.shutterstock.com/image-vector/badminton-player-smash-match-competition-600nw-2018032022.jpg",
            "video": "./video/badminton-rules-for-beginners-explained.mp4",
            "title": "Badminton",
            "description": "A popular and energetic racket sport that can be played indoors in a hall or a large room. It's great for fitness and improving reflexes.",
            "instructions": "1.Use rackets to hit the shuttlecock over the net. 2.The opponent must return it before it hits the ground. 3.A point is scored when the opponent fails to return the shuttlecock. 4.Matches are usually played to 21 points.",
            "timing": "30-45 minutes",
            "players": "2 or 4 players (singles/doubles)",
            "age": "10+",
            "difficulty": "Medium",
            "rating": 4.4,
            "categories":"indoor female",
            "link": "./indoor-female.html",
            "buttonText": "Create Now"
        },
        {
            "id": 15,
            "image": "https://images.stockcake.com/public/a/9/a/a9aa6556-6e42-4969-9270-4cee15a61d21_large/musical-chairs-game-stockcake.jpg",
            "video": "./video/freeze-dance---musical-chairs-song-for-children-official-video-by-patty-shukla.mp4",
            "title": "Musical Chairs",
            "description": "A lively and fun game that tests listening skills and speed. Perfect for parties and gatherings.",
            "instructions": "1.Arrange chairs in a circle (one less than the number of players). 2.Play music while players walk around the chairs. 3.When the music stops, everyone must find a chair to sit on. 4.The player left standing is eliminated, and one chair is removed. 5.The last player sitting wins.",
            "timing": "10-15 minutes",
            "players": "4-10 players",
            "age": "All ages",
            "difficulty": "Easy",
            "rating": 4.4,
            "categories":"indoor female",
            "link": "./indoor-female.html",
            "buttonText": "Create Now"
        },
        {
            "id": 16,
            "image": "https://cf.geekdo-images.com/dxT8RgLXZ6ePufBBD_yN0Q__large/img/1GUWaG2G1q35gbtHRCxLj4QEfAc=/fit-in/1024x1024/filters:no_upscale():strip_icc()/pic6468569.png",
            "video": "./video/puzzle-solving-treasing-challenges.mp4",
            "title": "Puzzle Solving Brain-Teasing Challenges",
            "description": "Jigsaw puzzles, Sudoku, or crossword puzzles that stimulate the mind.",
            "instructions": "1.Solve puzzles individually or in teams. 2.Complete the picture or fill the grid correctly.",
            "timing": "30-60 minutes",
            "players": "1-4 players",
            "age": "7+ ages",
            "difficulty": "Easy to Medium",
            "rating": 4.4,
            "categories":"indoor female",
            "link": "./indoor-female.html",
            "buttonText": "Create Now"
        },
        {
            "id": 17,
            "image": "https://images.unsplash.com/photo-1518834107812-67b0b7c58434?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            "video": "./video/drawing-crafting.mp4",
            "title": "Drawing & Crafting",
            "description": "Non-competitive activities that allow for creativity and relaxation.",
            "instructions": "1.Sketching and painting. 2.Mandala art. 3.DIY crafts and jewelry making",
            "timing": "30 minutes - 2 hours",
            "players": "1 or more",
            "age": "10+ ages",
            "difficulty": "Easy to Medium",
            "rating": 4.4,
            "categories":"indoor female",
            "link": "./indoor-female.html",
            "buttonText": "Create Now"
        },
        {
            "id": 18,
            "image": "https://activeforlife.com/img/large/2021/10/kids-skipping-rope.jpg",
            "video": "./video/jump-rope.mp4",
            "title": "Jump Rope",
            "description": "A classic and energetic activity where players jump over a swinging rope. It's fantastic for building stamina, coordination, and can be played solo or in a group for fun and fitness.",
            "instructions": "1.Two players turn a long rope while others take turns jumping in. 2.Jumpers must enter, jump, and exit without touching the rope. 3.The game can include rhymes or challenges, and a jumper is 'out' if they miss a jump.",
            "timing": "15-30 minutes",
            "players": "3 or more players",
            "age": "4-16 years",
            "difficulty": "Easy - Medium",
            "rating": 4.9,
            "categories":"outdoor female",
            "link": "./outdoor-female.html",
            "buttonText": "Start Learning"
        },
        {
            "id": 19,
            "image": "https://thebridge.in/wp-content/uploads/2020/12/Track-Cycling.jpg",
            "video": "./video/cycling.mp4",
            "title": "Cycling Races",
            "description": "A thrilling race on bicycles that can be a simple sprint or include fun obstacles. It promotes physical fitness, balance, and a sense of adventure in a safe, open area.",
            "instructions": "1.Set a clear start and finish line or create a safe course. 2.On 'Go!', all cyclists race towards the finish line. 3.The first one to cross the finish line wins. Helmets and safety are a must.",
            "timing": "20-40 minutes",
            "players": "2 or more players",
            "age": "4-16 years",
            "difficulty": "Easy",
            "rating": 4.9,
            "categories":"outdoor female",
            "link": "./outdoor-female.html",
            "buttonText": "Start Learning"
        },
        {
            "id": 20,
            "image": "https://i.pinimg.com/736x/ee/f8/80/eef880bf3dd2dd6e1a03e3a2d7a5404c.jpg",
            "video": "./video/throwball-game.mp4",
            "title": "Throwball",
            "description": "A dynamic team game similar to volleyball but played with a larger ball and without spiking. The focus is on throwing, catching, and teamwork, making it inclusive and enjoyable.",
            "instructions": "1.Two teams stand on either side of a net. The ball is thrown over the net into the opponent's court. 2.The receiving team has three touches to catch and throw it back. 3.A point is scored if the ball hits the ground on the opponent's side or if they make a fault.",
            "timing": "45-60 minutes",
            "players": "7-14 players (2 teams of 7 each)",
            "age": "4-16 years",
            "difficulty": "Varies by age",
            "rating": 4.9,
            "categories":"outdoor female",
            "link": "./outdoor-female.html",
            "buttonText": "Start Learning"
        },
        {
            "id": 21,
            "image": "https://dailymom.com/portal/wp-content/uploads/2023/09/charade3-2.jpg",
            "video": "./video/how-to-play-charades.mp4",
            "title": "Charades",
            "description": "A hilarious game where players act out words or phrases without speaking while their team tries to guess what they're portraying.",
            "instructions": "1.Divide into two teams. 2.Write down movies, books, animals or actions on slips of paper. 3.Players take turns acting out the word while their team guesses. 4.The team with most correct guesses wins.",
            "timing": "20-40 minutes",
            "players": "4-10 players",
            "age": "Adult",
            "difficulty": "Easy",
            "rating": 4.9,
            "categories":"indoor family",
            "link": "./indoor-family.html",
            "buttonText": "Start Learning"
        },
        {
            "id": 22,
            "image": "https://pickmeupgame.com/cdn/shop/articles/319.jpg?v=1734876605&width=1100",
            "video": "./video/card.mp4",
            "title": "Card Games",
            "description": "Various card games that combine strategy, luck, and fun - perfect for all age groups. Popular Games: UNO, Rummy, Bluff, Go Fish",
            "instructions": "1.Match cards by color or number. 2.Use action cards to skip opponents or make them draw cards. 3.Shout 'UNO!' when you have one card left. 4.First to play all cards wins.",
            "timing": "20-45 minutes",
            "players": "2-8 players",
            "age": "Adult ",
            "difficulty": "Easy to Medium",
            "rating": 4.9,
            "categories":"indoor family",
            "link": "./indoor-family.html",
            "buttonText": "Start Learning"
        },
        {
            "id": 23,
            "image": "https://i.ytimg.com/vi/I69pd-oNEKc/hq720.jpg?sqp=-oaymwEhCK4FEIIDSFryq4qpAxMIARUAAAAAGAElAADIQj0AgKJD&rs=AOn4CLB_HR85YpQWaSy-617ZhZt43wddiQ",
            "video": "./video/level-tips-for-doing-a-jigsaw-puzzle---10-expert.mp4",
            "title": "Jigsaw Puzzle Challenge",
            "description": "A calming yet engaging activity where the family works together to complete a jigsaw puzzle.",
            "instructions": "1.Choose a puzzle with appropriate difficulty 2.Work together to sort pieces and build sections 3.Collaborate to complete the entire picture 4.Celebrate when the final piece is placed",
            "timing": "1-3 hours",
            "players": "2-8 players",
            "age": "Adult",
            "difficulty": "Easy to Hard",
            "rating": 4.9,
            "categories":"indoor family",
            "link": "./indoor-family.html",
            "buttonText": "Start Learning"
        },
        {
            "id": 24,
            "image": "https://thehoodmagazine.com/wp-content/uploads/2024/07/AdobeStock_733751751-1024x683.jpeg",
            "video": "./video/olympics.mp4",
            "title": "Family Olympics",
            "description": " Create your own mini-Olympics with various simple games and competitions suitable for all ages in your backyard or local park.",
            "instructions": "1.Set up different stations for races, throwing games, and obstacle courses 2.Divide into teams with mixed ages 3.Award points for each event and declare overall winners",
            "timing": "1-2 hours",
            "players": "6-20 players",
            "age": "Adult years",
            "difficulty": "Easy-Medium",
            "rating": 4.9,
            "categories":"outdoor family",
            "link": "./outdoor-family.html",
            "buttonText": "Join us"
        },
        {
            "id": 25,
            "image": "https://thetravelingchild.co/wp-content/uploads/2019/08/Backyard-Camping-Staycation-Ideas-for-Families-2.jpg",
            "video": "./video/camping.mp4",
            "title": "Backyard Camping",
            "description": "Set up tents in your backyard for a mini-camping experience complete with stories, games, and outdoor cooking.",
            "instructions": "1.Pitch tents and create a camping area 2.Tell stories around a (safe) fire pit or lantern 3.Play camping games and enjoy outdoor meals.",
            "timing": "2-4 hours (or overnight)",
            "players": "3-8 players",
            "age": "Adult years",
            "difficulty": "Easy",
            "rating": 4.9,
            "categories":"outdoor family",
            "link": "./outdoor-family.html",
            "buttonText": "Join us"
        },
        {
            "id": 26,
            "image": "https://m.media-amazon.com/images/I/81r6AGb+1rL._AC_UF1000,1000_QL80_.jpg",
            "video": "./video/giant board.mp4",
            "title": "Giant Board Games",
            "description": "Create oversized versions of popular board games using chalk on pavement or large mats on grass.",
            "instructions": "1.Draw giant game boards with chalk 2.Use family members as game pieces 3.Play giant versions of Monopoly, Snakes & Ladders, Twister, or Tic-Tac-Toe",
            "timing": "30-60 minutes",
            "players": "4-8 players",
            "age": "Adult years",
            "difficulty": "Easy",
            "rating": 4.9,
            "categories":"outdoor family",
            "link": "./outdoor-family.html",
            "buttonText": "Join us"
        }
    ]
};

// Current game ID for download functionality
let currentGameId = null;

async function loadDetailsData() {
    try {
        const data = gameDetails;

        // ✅ Filter cards by selected category
        const selectedCategory = localStorage.getItem('categories');
        if (!selectedCategory) {
            document.getElementById('cards-container').innerHTML =
                '<p style="text-align:center;color:#c00;font-size:2rem;">No category selected please go the category page and select your category</p>';
            return;
        }

        const filteredCards = data.cards.filter(card =>
            card.categories && card.categories.toLowerCase() === selectedCategory.toLowerCase()
        );
        
        if (filteredCards.length === 0) {
            document.getElementById('cards-container').innerHTML =
                `<p style="text-align:center;color:#c00;font-size:2rem;">No games found for “${selectedCategory}”.</p>`;
            return;
        }

        // ✅ Load only filtered cards
        loadCards(filteredCards);

    } catch (error) {
        console.error('Error loading details data:', error);
    }
    const filteredCards = data.cards.filter(card =>
    (card.categories || "").toLowerCase().includes(selectedCategory.toLowerCase())
);
}

// Load cards from JSON data
function loadCards(cardsData) {
    const cardsContainer = document.getElementById('cards-container');

    cardsContainer.innerHTML = cardsData.map(card => `
                    <div class="card fade-right blur-in" data-id="${card.id}">
                        <div class="card-image" style="background-image: url('${card.image}')"></div>
                        <h2>${card.title}</h2>
                        <p>${card.description}</p>
                        <div class="rating-star">
                            ${generateStarRating(card.rating)}
                        </div>
                        <button class="card-button" data-id="${card.id}">${card.buttonText}</button>
                    </div>
                `).join('');

    // Add event listeners to buttons
    document.querySelectorAll('.card-button').forEach(button => {
        button.addEventListener('click', function () {
            const cardId = this.getAttribute('data-id');
            openModal(cardId);
        });
    });
}

// Generate star rating HTML
function generateStarRating(rating) {
    const fullStars = Math.floor(rating);
    const hasHalfStar = rating % 1 !== 0;
    let starsHTML = '';

    // Full stars
    for (let i = 0; i < fullStars; i++) {
        starsHTML += '<i class="fa-solid fa-star"></i>';
    }

    // Half star
    if (hasHalfStar) {
        starsHTML += '<i class="fa-solid fa-star-half-stroke"></i>';
    }

    // Empty stars
    const emptyStars = 5 - Math.ceil(rating);
    for (let i = 0; i < emptyStars; i++) {
        starsHTML += '<i class="fa-regular fa-star"></i>';
    }

    return starsHTML;
}

// Open modal with game details
function openModal(cardId) {
    const game = gameDetails.cards.find(card => card.id == cardId);
    if (!game) return;

    // Set current game ID for download
    currentGameId = cardId;

    // Set modal content
    document.getElementById('modal-image').src = game.image;
    document.getElementById('modal-video').src = game.video;
    document.getElementById('modal-title').textContent = game.title;
    document.getElementById('modal-description').textContent = game.description;
    document.getElementById('modal-instructions').textContent = game.instructions;
    document.getElementById('modal-timing').textContent = game.timing;
    document.getElementById('modal-players').textContent = game.players;
    document.getElementById('modal-age').textContent = game.age;
    document.getElementById('modal-difficulty').textContent = game.difficulty;
    document.getElementById('modal-rating').innerHTML = generateStarRating(game.rating);

    // Show modal
    document.getElementById('modal-overlay').style.display = 'flex';

    // Reset video
    document.getElementById('modal-video').load();
}

// Close modal
function closeModal() {
    document.getElementById('modal-overlay').style.display = 'none';
    document.getElementById('modal-video').pause();
    currentGameId = null;
}

// Open fullscreen media
function openFullscreenMedia(type, src) {
    const fullscreenModal = document.getElementById('fullscreen-modal');
    const fullscreenImage = document.getElementById('fullscreen-image');
    const fullscreenVideo = document.getElementById('fullscreen-video');

    if (type === 'image') {
        fullscreenImage.src = src;
        fullscreenImage.style.display = 'block';
        fullscreenVideo.style.display = 'none';
    } else if (type === 'video') {
        fullscreenVideo.src = src;
        fullscreenVideo.style.display = 'block';
        fullscreenImage.style.display = 'none';
        fullscreenVideo.load();
        fullscreenVideo.play();
    }

    fullscreenModal.style.display = 'flex';
}

// Close fullscreen media
function closeFullscreenMedia() {
    document.getElementById('fullscreen-modal').style.display = 'none';
    document.getElementById('fullscreen-video').pause();
}

// Download game documentation as Word document
function downloadGameDocumentation() {
    if (!currentGameId) return;

    const game = gameDetails.cards.find(card => card.id == currentGameId);
    if (!game) return;

    // Create the content for the Word document
    const content = `
            <html xmlns:o='urn:schemas-microsoft-com:office:office' 
                  xmlns:w='urn:schemas-microsoft-com:office:word' 
                  xmlns='http://www.w3.org/TR/REC-html40'>
            <head>
                <meta charset="utf-8">
                <title>${game.title} - Game Documentation</title>
                <style>
                    body {
                        font-family: Arial, sans-serif;
                        line-height: 1.6;
                        margin: 40px;
                    }
                    h1 {
                        color: #1c3334;
                        font-size: 24px;
                        border-bottom: 2px solid #376e6f;
                        padding-bottom: 10px;
                    }
                    h2 {
                        color: #376e6f;
                        font-size: 18px;
                        margin-top: 20px;
                    }
                    .info-section {
                        margin-bottom: 20px;
                    }
                    .info-label {
                        font-weight: bold;
                        color: #2f4454;
                    }
                    .instructions {
                        background-color: #f5f7fa;
                        padding: 15px;
                        border-radius: 5px;
                        margin: 15px 0;
                    }
                </style>
            </head>
            <body>
                <h1>${game.title}</h1>
                
                <div class="info-section">
                    <p><span class="info-label">Description:</span> ${game.description}</p>
                </div>
                
                <div class="info-section">
                    <h2>Game Information</h2>
                    <p><span class="info-label">Game Timing:</span> ${game.timing}</p>
                    <p><span class="info-label">Player Count:</span> ${game.players}</p>
                    <p><span class="info-label">Age Group:</span> ${game.age}</p>
                    <p><span class="info-label">Difficulty:</span> ${game.difficulty}</p>
                    <p><span class="info-label">Rating:</span> ${game.rating}/5</p>
                </div>
                
                <div class="info-section">
                    <h2>Instructions</h2>
                    <div class="instructions">
                        ${game.instructions.replace(/\n/g, '<br>')}
                    </div>
                </div>
                
                <div class="info-section">
                    <p><em>Document generated from Playful Outing Games</em></p>
                </div>
            </body>
            </html>
        `;

    // Create a Blob with the content
    const blob = new Blob([content], { type: 'application/msword' });

    // Create a download link
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = `${game.title.replace(/[^a-z0-9]/gi, '_').toLowerCase()}_documentation.doc`;

    // Trigger the download
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
}

// Initialize navbar toggle functionality
function initializeNavbarToggle() {
    const navbartoggle = document.querySelector(".navbar-toggle");
    const navbarmenu = document.querySelector(".navbar-menu");

    if (navbartoggle && navbarmenu) {
        navbartoggle.addEventListener("click", () => {
            navbartoggle.classList.toggle('active');
            navbarmenu.classList.toggle('active');
        });
    }
}


// Initialize everything when DOM is loaded
document.addEventListener("DOMContentLoaded", function () { 
    loadDetailsData();
    // Scroll Observer
    const animatedElements = document.querySelectorAll(
        ".fade-left, .fade-right, .zoom-in, .fade-rotate, .bounce-in, .blur-in"
    );

    const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
            if (entry.isIntersecting) {
                entry.target.classList.add("show");
            }
        });
    }, { threshold: 0.2 });


    animatedElements.forEach((el) => observer.observe(el));

    initializeNavbarToggle();

    // Modal event listeners
    document.getElementById('modal-close').addEventListener('click', closeModal);
    document.getElementById('modal-overlay').addEventListener('click', function (e) {
        if (e.target === this) closeModal();
    });

    // Fullscreen modal event listeners
    document.getElementById('fullscreen-close').addEventListener('click', closeFullscreenMedia);
    document.getElementById('fullscreen-modal').addEventListener('click', function (e) {
        if (e.target === this) closeFullscreenMedia();
    });

    // Media click events for fullscreen
    document.getElementById('modal-image').addEventListener('click', function () {
        openFullscreenMedia('image', this.src);
    });

    document.getElementById('modal-video').addEventListener('click', function () {
        openFullscreenMedia('video', this.src);
    });

    // Download button event listener
    document.getElementById('modal-download').addEventListener('click', downloadGameDocumentation);
});

